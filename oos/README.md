# skeleton-c
A portable skeleton `C` project with Makefile-based build process suitable
for projects in which the source files are stored elsewhere.

## Overview
This is a skeleton project in `C`. Can be used for `C++` as well. Included you
will find the following:
# TODO: List the components in this repo.

## Output files
You should do a build immediately after cloning this repo, just to make
sure everything compiles as it is. To build you must do either `make
debug` or `make release`. The build will display all of the build
variables before a build is started. Doing a plain `make` will display a
list of targets that the user can build.

After building the project you will have either a `debug/` directory or a
`release/` directory depending on whether you did `make debug` or `make
clean`. I'll assume you did `make debug` from this point; all the
directory names that start with `debug/` will be `release/` if you did
`make release`.

- `debug/obs`:   Contains all the object files generated by the build.
- `debug/bin`:   Contains all the programs files generated by the build.
- `debug/lib`:   Contains all the library files generated by the build.

# TODO: list the expected output files.

## Input files and input variables
# TODO: What source files are supported, how to specify them and how
# to modify build.config

## Setting the project name and version
At the very top of the `build.config` file there are two variables; one
is for the project name and the other is for the version. Set these two
variables to the name of your project and the version.
```make
PROJNAME=skeleton
VERSION=3.14.59
```
Replace the string `skeleton` with the name of your project. Replace the
string `3.14.59` with the version of your project.

## Specifying the list of programs to be compiled
Next there are the optional `main` program source files. These are all the
source files that have a `main()` entry point; they will be compiled and
linked as executables. There are two variables for `main` program source files
- one for `C` source files and one for `C++` source files.

Set each of these variables to a list of source files (minus the
extensions). For example, assuming that we have two programs that need to
be built (`cpp_prog1` and `cpp_prog2`), and both are `C++` files with a
`main()` function, you must specify them as follows:
```make
MAIN_PROGRAM_CPPSOURCEFILES=\
   cpp_prog1\
   cpp_prog2
```

If you **also** have two programs written in `C` as well, named `c_prog1`
and `c_prog2`, you can **also** set the following variable as follows:
```make
MAIN_PROGRAM_CSOURCEFILES=\
   c_prog1\
   c_prog2
```

## Specifying the list of modules to be compiled
# TODO: Specifying source files.

## Headers and include paths
# TODO: Specifying headers and include paths

## Libraries and library paths
You can specify the list of library paths (paths to search for library
files) as follows:
```make
LIBRARY_PATHS=\
   $(HOME)/lib\
   $(HOME)/contrib/lib
```

For the actual libraries to link in, you can specify those as follows:
```make
LIBRARY_FILES=\
   library_name_1\
   library_name_2
```
Note that you **MUST NOT** specify the file extension `.so` or `.dll`, and
you **must not** specify the `lib` prefix that is common to all libraries.

The build process will add the `lib` prefix and the correct file extension
based on the platform.

## Extra build flags
# TODO: Add in platform specific flags the way qmake and cmake have them
You can specify extra build flags that will be passed to the compilers and
linkers by setting them in the following variables (note that this
doesn't override the flags that the build process will use, it will only
add to them):

```make
EXTRA_COMPILER_FLAGS=\
   -DNAME=Value\
   -W -Wall

EXTRA_CFLAGS=\
   -std=c99

EXTRA_CXXFLAGS=\
   -std=c++11
```

In addition, you can **override** the default compilers used by setting
the following variables:
```make
   GCC=gcc
   GXX=gxx
```
This is useful if you want to cross-compile, use a newer compiler or even
just switch to `clang`. At th moment the only compilers supported are
those that support the `gcc` command-line arguments.

TODO: extra link flags, overriding the linker.
TODO: List the predefined variables

